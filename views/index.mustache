<html>
<head>
<link href="/style.css" type="text/css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Baloo+Paaji|Poor+Story|Reenie+Beanie|Work+Sans:300,500,700" rel="stylesheet">
<link rel="stylesheet" href="/popupS.min.css">

</head>

<body>
<div id="top-bar">
    <a href="/index"><img class="logo" src="./logo.png"></img></a>
</div>
        <div class="nav-bar">
            <li><a href='/'>Login</a></li>
            <li><a href='/index'>Home</a></li>
            <li><a href='/logout'>Log Out</a></li>
        </div>

<div>
<form action="/select-category" method="POST">
  <h1>Transactions</h1>
  <select name="ddViewBy" onchange="this.form.submit();">
            <option value="0">Select Category:</option>
            <option value="All">All Expenses</option>
            <option value="Food">Food</option>
            <option value="Education">Education</option>
            <option value="Housing">Housing</option>
            <option value="Transportation">Transportation</option>
            <option value="Entertainment">Entertainment</option>
            <option value="Personal Expenses">Personal Expenses</option>
            <option value="Bills">Bills</option>
            <option value="Other">Other</option>
    </select>
</form>
</div>


<div>
{{#transactions}}

   <h3>{{name}}</h3><p>---- Amount: ${{amount}}---- Category: {{category}}--- Description: {{description}}</p>
    <form action="/delete-transaction" method="POST">
        <input type="hidden" name="transactionId" value="{{id}}"/>
        <input type="submit" value="Remove" />
    </form>
{{/transactions}}
</div>

<div>

{{#category}}
<h3>{{name}}</h3><p>---- Amount: ${{amount}}---- Category: {{category}}--- Description: {{description}}</p>
    <form action="/delete-transaction" method="POST">
    <input type="hidden" name="transactionId" value="{{id}}"/>
    <input type="hidden" name="category" value="{{category}}"/>
    <input type="submit" value="Remove" />
</form>

{{/category}}
</div>

<div id="body">
    <h1>Add NEW TRANSACTION</h1>
    <form id="new-transaction-form" action="/new-transaction" method="POST">
        <input type="text" name="name" placeholder="Enter Transaction Name"/>
        <input type="text" name="amount" placeholder="Enter Amount"/>
        <div class="custom-select" style="width:200px;">
        <select  id="cat" name="category">
            <option value="0">Select Category:</option>
            <option value="Food">Food</option>
            <option value="Education">Education</option>
            <option value="Housing">Housing</option>
            <option value="Transportation">Transportation</option>
            <option value="Entertainment">Entertainment</option>
            <option value="Personal Expenses">Personal Expenses</option>
            <option value="Bills">Bills</option>
            <option value="Other">Other</option>
        </select>
        <script>


        function evalForm(event){
            
        
            let category = document.getElementById("cat");
            
            let categoryValue = category.options[category.selectedIndex].value
            console.log("category value",categoryValue)
            
            if (categoryValue == "0"){
                console.log("y u do dis")
                let trans_form = document.getElementById("new-transaction-form")
                   event.preventDefault() 
                   popupS.alert({
                       content:'Please select category'
                   })
            }else {
                console.log("submitting form")
                document.getElementById("new-transaction-form").submit()
            };
        }
        
        
        </script>
        </div>
        <input type="text" name="description" placeholder="Enter description"/>
        {{! <button onclick="addCategory(event)">Post 2</button> }}
        <input id="postBtn" type="button" value="Post" onclick="evalForm(event)"/>
    </form>
</div>


</body>
<script src="/popupS.min.js"></script>
</html>
